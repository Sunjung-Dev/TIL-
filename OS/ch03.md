# Chapter03 프로세스와 스레드 

## 01 프로세스의 개요 

프로세스의 개념 
> - 프로그램: 어떤 데이터를 사용하여 어떤 작업을 할지 그 절차를 적어놓은 것 
> - 프로세스: '실행한다', 프로그램으로 작성된 작업 절차를 실행에 옮긴다는 의미 
>   - 프로그램 -> 실행 -> 프로세스 

일괄 작업 방식
> - 한 번에 하나의 작업만 처리하는 것

시분할 방식 
> - CPU가 시간을 쪼개어 여러 프로세스에 적당히 배분함으로써 프로세스가 동시에 실행되는 것처럼 느껴짐 

프로그램에서 프로세스로의 전환 
> - 프로세스 제어 블록(PCB): 작업 지시서 
>   - 프로세스 작업 블록가 없으면 프로그램이 프로세스로 전환되지 못함 
>   - 프로세스가 되었다 == 운영체제로부터 프로세스 제어 블록을 받았다 
>   - 구성
>       - 프로세스 구분자: PID 
>       - 메모리 관련 정보: 프로세스 메모리 위치 정보, 프로세스 구분자 
>       - 각종 중간값: 다음에 작업해야 할 코드의 위치가 담긴 레지스터인 프로그램 카운터가 저장됨 -> 작업을 계속 진행될 수 있게 해줌 
>   - 운영체제 영역에 만들어짐 
>   - 프로세스 종료: 해당 프로세스 제어 블록이 폐기 
>   - 프로세스가 된다: 운영체제로부터 프로세스 제어 블록을 얻는다 
>   - 컴퓨터 내에 사용자가 실행한 프로세스만 있는 것이 아님

프로세스 상태(활성상태)
> - 일괄작업시스템: 생성 - 실행 - 완료 끝 ! 
> - 생성상태: 프로세스가 메모리에 올라와 실행 준비를 완료한 상태 -> PCB 생성
> - 준비상태: 생성된 프로세스가 CPU를 얻을 때까지 기다리는 상태
>   - CPU 스케쥴러: 다음에 실행할 프로세스를 선정
>       - 준비상태의 맨 앞에서 기다리고 있는 프로세스 제어블록을 CPU에 전달하여 작업이 이루어짐
>       - <span style="color:blue">큐 구조</span>
> - 실행상태: 실제 작업을 수행하는 상태
>   - 타임아웃: 프로세스가 하나의 타임 슬라이스 동안 작업을 끝내지 못하면 다시 준비 상태로 돌아감 
>   - 클록으로부터의 인터럽트: 일정 시간이 다 되면 클록은 인터럽트를 사용하여 일정 시간이 흘렀다고 CPU에 알려줌 
> - 완료상태: 작업을 마침, PCB가 사라진 상태, 그럼 이때가 프로그램 상태
>   - 메모리에서 삭제, 프로세스 제어 블록 폐기
>   - 코어 덤프: 디버깅하기 위해 강제 종료 직전의 메모리 상태를 저장장치로 옮김
>       - 종료 직전의 메모리 상태를 확인함으로써 오류를 수정할 수 있게 해줌 
> - 대기상태: 입출력을 요구한 프로세스가 입출력이 완료될 때까지 기다리는 상태 
>   - 작업의 효율성을 높이기 위해 입출력을 요청한 프로세스를 실행 상태에 두지 않고 대기 상태로 옮기는 것 
>   - 큐 
>   - 입출력이 완료되면 인터럽트가 발생, 대기 상태에 있는 여러 프로세스 중 해당 인터럽트로 깨어날 프로세스를 찾음 
>   - 인터럽트 때문에 어떤 프로세스는 준비상태로 가는 것 

휴식상태와 보류 상태
> - 휴식상태: 프로세스가 작업을 일시적으로 쉬고 있는 상태
>   - Ctrl + z 
> - 보류상태: 프로세스가 메모리에서 잠시 쫓겨난 상태
>   - 메모리가 꽉 차서 프로세스를 메모리 밖으로 내보낼 때 
>   - 프로그램에 오류가 있어서 실행을 미루어야 할 때 
>   - 바이러스와 같이 악의적인 공격을 하는 프로세스라고 판단될 때 
>   - 매우 긴 주기로 반복되는 프로세스라 메모리 밖으로 쫓아내도 큰 문제가 없을 때 
>   - 입출력을 기다리는 프로세스의 입출력이 계속 지연될 때 
>   - 스왑 영역: 메모리에서 쫓겨난 데이터가 임시로 보관되는 곳 
-----

## 02 프로세스 제어 블록과 문맥 교환 
프로세스 제어 블록
> - 포인터: 프로세스 제어 블록을 연결하여 준비 상태나 대기 상태의 큐를 구현할 때 
> - 프로세스 상태: 활성상태 + 보류 상태 
> - 프로세스 구분자: PID
> - 프로세스 카운터
> - 프로세스 우선순위
> - 각종 레지스터 정보
>   - <span style="color:yellow">왜 중간값으로 저장하게 될까?</span>
> - 메모리 관리 정보 
> - 할당된 자원 정보
> - 계정 정보
> - 부모 프로세스 구분자와 자식 프로세스 구분자 

문맥교환 
> - 문맥교환: 새로운 프로세스를 받아들이는 작업 
>   - 두 프로세스 제어 블록의 내용이 변경됨 
>   - 인터럽트 처리할 때 

타임슬라이스
> - 적당한 크기로 설정하는 것이 중요함, 되도록 작게 설정 

